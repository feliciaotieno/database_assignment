{% extends 'base.html' %}
{% block content %}
<div class="container">
  <h2>Search results for “{{ q }}”</h2>

  {% if results %}
    <p>{{ results|length }} product{{ '' if results|length == 1 else 's' }} found.</p>
    <div class="product-grid">
      {% for product in results %}
        <div class="product-card">
          {% if product.image_url %}
            <img src="{{ url_for('static', filename=product.image_url) }}" alt="{{ product.name }}">
          {% endif %}
          <h3>{{ product.name }}</h3>
          <p>{{ product.description }}</p>
          <p><strong>€{{ '%.2f'|format(product.price) }}</strong></p>
          <form method="POST" action="{{ url_for('add_to_cart', product_id=product.id) }}">
            <button type="submit">Add to Cart</button>
          </form>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p>No products matched your search.</p>
    <p><a href="{{ url_for('view_products') }}">Browse all products</a></p>
  {% endif %}
</div>
{% endblock %}
